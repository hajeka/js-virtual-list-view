function jsvlv(e,n,t,o){function i(e,n){y||o.onSelectRow(e,n)}function d(e,n){n.addEventListener("click",function(){i(e,n)},!1)}function r(){var e,t=I;if(g.style.top=t+"px",0>t)for(e=_viewportEndIndex+1;n-t-k>0;){if(!(b>e)){I=n-k,g.style.top=I+"px";break}a(e),e++}else I>0&&(g.style.top="0px",I=0)}function l(e){e.preventDefault(),y||(e.stopPropagation(),I+=e.wheelDeltaY,requestAnimationFrame(r))}function s(e){console.log(e.keyCode);var n=!1;y||(38==e.keyCode?(I+=15,requestAnimationFrame(r),n=!0):40==e.keyCode&&(I-=15,requestAnimationFrame(r),n=!0),n&&(e.preventDefault(),e.stopPropagation()))}function a(e){var n,o=t.contentForRowAtIndex(e);g.appendChild(o),n=$(o).outerHeight(!0),k+=n,C.push({index:e,element:o,height:n}),d(e,o),_viewportEndIndex=e}function u(){for(var e=0;n>k&&b>e;)a(e),e++}function c(){for(;g.firstChild;)g.removeChild(g.firstChild);g.style.top="0px",C=[],E=0,_viewportEndIndex=-1,k=0,I=0,b=t?t.numberOfRows():0}var v=this,f="vlv"+Math.round(1e6*Math.random()),h='<div id="<%= id %>" class="vlv-container" style="width:<%=width %>px;height:<%=height %>px;"></div>',p=$(_.template(h,{id:f,width:e,height:n})),m=p[0],w=null,x=$('<div class="vlv-content"></div>'),g=x[0],y=!1,C=[],E=0,k=0,I=0,L=!1,b=t?t.numberOfRows():0;return v.getElement=function(){return m},v.show=function(e){m.appendChild(g),m.addEventListener("mousewheel",l,!0),document.addEventListener("keydown",s,!0),e.appendChild(m),L=!0,w=e,c(),u()},v.hide=function(){m.removeEventListener("mousewheel",l,!0),document.removeEventListener("keydown",s,!0),L&&(w&&w.removeChild(m),L=!1)},v.reload=function(){c(),u()},v.freeze=function(){y=!0},v.unfreeze=function(){y=!1},v.dbgdmp=function(){console.log({content:C,scrollDistance:I,contentHeight:k,firstIndex:E,lastIndex:_viewportEndIndex})},v}