function jsvlv(e,n,t,i){function o(e,n){x||i.onSelectRow(e,n)}function d(e,n){n.addEventListener("click",function(){o(e,n)},!1)}function r(){var e,t=I;if(m.style.top=t+"px",0>t)for(e=_viewportEndIndex+1;n-t-C>0;){if(!(y>e)){I=n-C,m.style.top=I+"px";break}u(e),e++}else I>0&&(m.style.top="0px",I=0)}function l(e){e.preventDefault(),x||(e.stopPropagation(),I+=e.wheelDeltaY,requestAnimationFrame(r))}function u(e){var n,i=t.contentForRowAtIndex(e);m.appendChild(i),n=$(i).outerHeight(!1),C+=n,g.push({index:e,element:i,height:n}),d(e,i),_viewportEndIndex=e}function c(){for(var e=0;n>C&&y>e;)u(e),e++}function f(){for(;m.firstChild;)m.removeChild(m.firstChild);g=[],E=0,_viewportEndIndex=-1,C=0,I=0,y=t?t.numberOfRows():0}var h=this,s=null,v="vlv"+Math.round(1e6*Math.random()),a='<div id="<%= id %>" class="vlv-container" style="width:<%=width %>px;height:<%=height %>px;"></div>',p=$(_.template(a,{id:v,width:e,height:n})),s=p[0],w=null,m=$('<div class="vlv-content"></div>')[0],x=!1,g=[],E=0,C=0,I=0,b=!1,y=t?t.numberOfRows():0;return h.getElement=function(){return s},h.show=function(e){s.appendChild(m),s.addEventListener("mousewheel",l,!0),e.appendChild(s),b=!0,w=e,f(),c()},h.hide=function(){s.removeEventListener("mousewheel",l,!0),b&&(w&&w.removeChild(s),b=!1)},h.reload=function(){f(),c()},h.freeze=function(){x=!0},h.unfreeze=function(){x=!1},h.dbgdmp=function(){console.log({content:g,scrollDistance:I,contentHeight:C,firstIndex:E,lastIndex:_viewportEndIndex})},h}