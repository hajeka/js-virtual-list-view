function jsvlv(e,n,t,o){function i(e,n){C||o.onSelectRow(e,n)}function d(e,n){n.addEventListener("click",function(){i(e,n)},!1)}function r(){var e;2>Math.abs(A)?(b+=A,A=0):(e=Math.round(.6*A),b+=e,A-=e)}function l(){f.dbgdmp();var e;if(r(),y.style.top=b+"px",0>b)for(e=_viewportEndIndex+1;n-b-I>0;){if(!(F>e)){b=n-I,y.style.top=b+"px";break}u(e),e++}else b>0&&(y.style.top="0px",b=0);0!=A&&requestAnimationFrame(l)}function a(e){e.preventDefault(),C||(e.stopPropagation(),A+=e.wheelDeltaY,requestAnimationFrame(l))}function s(e){console.log(e.keyCode);var n=!1;C||(38==e.keyCode?(A+=15,requestAnimationFrame(l),n=!0):40==e.keyCode&&(A-=15,requestAnimationFrame(l),n=!0),n&&(e.preventDefault(),e.stopPropagation()))}function u(e){var n,o=t.contentForRowAtIndex(e);y.appendChild(o),n=$(o).outerHeight(!0),I+=n,E.push({index:e,element:o,height:n}),d(e,o),_viewportEndIndex=e}function c(){for(var e=0;n>I&&F>e;)u(e),e++}function v(){for(;y.firstChild;)y.removeChild(y.firstChild);y.style.top="0px",E=[],k=0,_viewportEndIndex=-1,I=0,b=0,F=t?t.numberOfRows():0}var f=this,p="vlv"+Math.round(1e6*Math.random()),h='<div id="<%= id %>" class="vlv-container" style="width:<%=width %>px;height:<%=height %>px;"></div>',m=$(_.template(h,{id:p,width:e,height:n})),w=m[0],g=null,x=$('<div class="vlv-content"></div>'),y=x[0],C=!1,E=[],k=0,I=0,b=0,A=0,D=!1,F=t?t.numberOfRows():0;return f.getElement=function(){return w},f.show=function(e){w.appendChild(y),w.addEventListener("mousewheel",a,!0),document.addEventListener("keydown",s,!0),e.appendChild(w),D=!0,g=e,v(),c()},f.hide=function(){w.removeEventListener("mousewheel",a,!0),document.removeEventListener("keydown",s,!0),D&&(g&&g.removeChild(w),D=!1)},f.reload=function(){v(),c()},f.freeze=function(){C=!0},f.unfreeze=function(){C=!1},f.dbgdmp=function(){console.log({content:E,scrollDistance:b,scrollDistancePending:A,contentHeight:I,firstIndex:k,lastIndex:_viewportEndIndex,contentTop:y.style.top})},f}